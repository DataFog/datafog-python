from cymem.cymem cimport Pool
from libc.stdint cimport int64_t

from .maps cimport (
    MapStruct,
    key_t,
    map_get,
    map_init,
    map_iter,
    map_set,
)

ctypedef int64_t count_t


cdef class PreshCounter:
    cdef Pool mem
    cdef MapStruct* c_map
    cdef public object smoother
    cdef readonly count_t total

    cpdef int inc(self, key_t key, count_t inc) except -1
